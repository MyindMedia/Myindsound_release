<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="/assets/images/Myind Sound Main Logo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Myind Sound Releases | PWYW</title>
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <!-- Unicorn Studio WebGL Background -->
  <div data-us-project="h4HiZ0HrC5hQkgRlxuEw" id="unicorn-background"
    style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; pointer-events: none;"></div>
  <div id="background-overlay"></div>
  <script src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v2.0.5/dist/unicornStudio.umd.js"></script>
  <script>
    // Initialize Unicorn Studio automatically if not handled by main.ts
    // This provides a fallback if the programmatic init fails
    window.addEventListener('load', () => {
        if (typeof UnicornStudio !== 'undefined' && !document.querySelector('#unicorn-background canvas')) {
             UnicornStudio.init();
        }
    });
  </script>
  <div id="app">
    <nav class="top-nav">
      <div class="nav-links">
        <a href="/" class="nav-link active">DIGITAL</a>
        <a href="/physical" class="nav-link">PHYSICAL</a>
        <a href="/login" class="nav-link">GET ACCESS</a>
      </div>
      <div id="nav-user" class="nav-user"></div>
    </nav>

    <div class="main-content">
      <section class="digital-section" id="digital">
        <div class="digital-container">
          <div class="album-art-side">
            <!-- Album Art Container - Separate from Purchase Box -->
            <div id="lit-album-container" class="album-art-container"
              style="position: relative; width: 100%; aspect-ratio: 1; margin-bottom: 2rem; perspective: 1000px;">
              <!-- Static Album Art -->
              <img src="/assets/images/lit-poster.png" alt="LIT Album Art" class="main-album-art dynamic-album-art"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; border-radius: 4px;" />
            </div>

            <!-- Purchase Box - Separate Container -->
            <div class="purchase-box" style="position: relative; z-index: 3;">
              <div class="price-input-wrapper">
                <span class="currency">$</span>
                <input type="number" id="pwyw-amount" value="5.00" min="1.00" step="1.00" />
              </div>
              <button id="checkout-btn" class="primary-btn">PAY WHAT YOU WANT</button>
              <p class="min-price-note">MINIMUM $1.00</p>
            </div>

            <!-- Player Controls (Hidden until Unlock) -->
            <div class="player-controls dashboard-hidden">
              <div class="visualizer-container"
                style="height: 60px; margin-bottom: 1rem; background: rgba(0,0,0,0.2); border-radius: 4px; overflow: hidden;">
                <canvas id="visualizer" style="width: 100%; height: 100%;"></canvas>
              </div>

              <div class="progress-container" style="margin-bottom: 1.5rem;">
                <div class="progress-bar" style="height: 4px; background: #333; border-radius: 2px; overflow: hidden;">
                  <div class="progress-fill" style="width: 0%; height: 100%; background: var(--accent-gold);"></div>
                </div>
              </div>

              <div class="control-buttons"
                style="display: flex; justify-content: center; gap: 2rem; align-items: center;">
                <button class="control-btn prev" style="background:none; border:none; color:white; cursor:pointer;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <polygon points="19 20 9 12 19 4 19 20"></polygon>
                    <line x1="5" y1="19" x2="5" y2="5" stroke="currentColor" stroke-width="2"></line>
                  </svg>
                </button>
                <button class="control-btn play-pause"
                  style="width: 48px; height: 48px; border-radius: 50%; background: var(--accent-gold); border: none; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="black">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                  </svg>
                </button>
                <button class="control-btn next" style="background:none; border:none; color:white; cursor:pointer;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <polygon points="5 4 15 12 5 20 5 4"></polygon>
                    <line x1="19" y1="5" x2="19" y2="19" stroke="currentColor" stroke-width="2"></line>
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <div class="tracklist-side">
            <header class="section-header">
              <span class="section-label">TRACKLIST</span>
            </header>
            <div id="tracklist" class="tracklist"></div>
          </div>
        </div>
      </section>

      <section class="coming-soon-section container">
        <header class="section-header">
          <span class="section-label">COMING SOON</span>
        </header>
        <div class="coming-soon-grid">
          <div class="coming-soon-card" tabindex="0" data-poster="/assets/images/cwalk-poster.png"
            data-audio-src="/assets/audio/Blood-Demo.mp3" data-audio-start="15" data-audio-duration="20">
            <div class="card-media">
              <div class="poster-group" data-peel-hover="20" data-peel-active="70" data-peel-direction="269"
                data-lighting="0.09" data-shadow="0.05" data-rotate="0">
                <div class="poster-layer"></div>
              </div>
              <div class="plastic-top"></div>
              <div class="plastic-bottom"></div>
              <video src="/assets/videos/c-walk-loop.mp4" poster="/assets/images/cwalk-poster.png"
                alt="C-WALK album cover" class="card-video" loop muted playsinline webkit-playsinline
                preload="none"></video>
            </div>
            <p class="card-title">C-WALK</p>
            <button class="card-play-btn" type="button" aria-label="Play demo" style="display: none;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="card-play-icon">
                <path d="M8 5v14l11-7z" />
              </svg>
            </button>
          </div>
          <div class="coming-soon-card" tabindex="0" data-poster="/assets/images/thesource-poster.png"
            data-audio-src="/assets/audio/God-is-Good-Demo.mp3" data-audio-start="140" data-audio-duration="20">
            <div class="card-media">
              <div class="poster-group" data-peel-hover="20" data-peel-active="70" data-peel-direction="269"
                data-lighting="0.09" data-shadow="0.05" data-rotate="0">
                <div class="poster-layer"></div>
              </div>
              <div class="plastic-top"></div>
              <div class="plastic-bottom"></div>
              <video src="/assets/videos/the-source-loop.mp4" poster="/assets/images/thesource-poster.png"
                alt="The Source album cover" class="card-video" loop muted playsinline webkit-playsinline
                preload="none"></video>
            </div>
            <p class="card-title">THE SOURCE</p>
            <button class="card-play-btn" type="button" aria-label="Play demo" style="display: none;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="card-play-icon">
                <path d="M8 5v14l11-7z" />
              </svg>
            </button>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Checkout Modal -->
  <div id="checkout-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <button id="close-modal" class="close-btn">&times;</button>
      <div id="modal-body"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
  <script type="module" src="/src/sticker-peel.ts"></script>
  <script type="module" src="/src/coming-soon.ts"></script>
  <script type="module" src="/src/main.ts"></script>
</body>

</html>